<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Danh sÃ¡ch bÃ i viáº¿t</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <h1>ğŸ“° Danh sÃ¡ch bÃ i viáº¿t</h1>

  <!-- Form tÃ¬m kiáº¿m + lá»c -->
  <form method="get" action="/" class="filter">
    <div class="field-group">
      <label>TÃ¬m kiáº¿m</label>
      <input type="text" name="search" value="<%= search %>" placeholder="ğŸ” TÃ¬m bÃ i viáº¿t...">
    </div>
  
    <div class="field-group">
      <label>Sáº¯p xáº¿p</label>
      <select name="sort">
        <option value="newest" <%= sort === 'newest' ? 'selected' : '' %>>ğŸ•“ Má»›i nháº¥t</option>
        <option value="oldest" <%= sort === 'oldest' ? 'selected' : '' %>>âŒ› CÅ© nháº¥t</option>
        <option value="id_asc" <%= sort === 'id_asc' ? 'selected' : '' %>>ğŸ”¢ ID tÄƒng dáº§n</option>
        <option value="id_desc" <%= sort === 'id_desc' ? 'selected' : '' %>>ğŸ”¢ ID giáº£m dáº§n</option>
      </select>
    </div>
  
    <button type="submit" class="primary">Lá»c</button>
    <a href="/add" class="btn-add">+ ThÃªm bÃ i má»›i</a>
  </form>

  <!-- Danh sÃ¡ch bÃ i viáº¿t -->
  <div class="posts-container">
    <% if (posts.length === 0) { %>
      <p>KhÃ´ng cÃ³ bÃ i viáº¿t nÃ o.</p>
    <% } else { %>
      <ul class="posts">
        <% posts.forEach(p => { %>
          <li>
            <div class="post-content">
              <h3><%= p.title %></h3>
              <p><%= p.body %></p>
              <small>ğŸ—“ <%= new Date(p.created_at).toLocaleString('vi-VN') %> | ğŸ†” ID: <%= p.id %></small>
            </div>
            <div class="actions">
              <a href="/edit/<%= p.id %>" class="edit">âœï¸</a>
              <a href="/delete/<%= p.id %>" class="delete" onclick="return confirm('XÃ³a bÃ i nÃ y?')">ğŸ—‘</a>
            </div>            
          </li>
        <% }) %>
      </ul>
    <% } %>
  </div>

  <div class="posts-footer"></div>
</body>
</html>

<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Danh sÃ¡ch bÃ i viáº¿t</title>
  <link rel="stylesheet" href="/style.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 700px;
      margin: 40px auto;
      background: #fafafa;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      color: #333;
    }
    form.filter {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      gap: 10px;
    }
    input, select, button {
      padding: 6px 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      background: white;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 10px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }
    li h3 { margin: 0; color: #007bff; }
    li small { color: #666; }
    a {
      text-decoration: none;
      color: #007bff;
      margin-right: 10px;
    }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <h1>ğŸ“° Danh sÃ¡ch bÃ i viáº¿t</h1>

  <!-- Gá»™p form lá»c + tÃ¬m kiáº¿m -->
  <form method="get" action="/" class="filter">
    <input type="text" name="search" value="<%= search %>" placeholder="ğŸ” TÃ¬m bÃ i viáº¿t...">
    <select name="sort">
      <option value="newest" <%= sort === 'newest' ? 'selected' : '' %>>ğŸ•“ Má»›i nháº¥t</option>
      <option value="oldest" <%= sort === 'oldest' ? 'selected' : '' %>>âŒ› CÅ© nháº¥t</option>
      <option value="id_asc" <%= sort === 'id_asc' ? 'selected' : '' %>>ğŸ”¢ ID tÄƒng dáº§n</option>
      <option value="id_desc" <%= sort === 'id_desc' ? 'selected' : '' %>>ğŸ”¢ ID giáº£m dáº§n</option>
    </select>
    <button type="submit">Lá»c</button>
    <a href="/add">+ ThÃªm bÃ i má»›i</a>
  </form>

  <% if (posts.length === 0) { %>
    <p>KhÃ´ng cÃ³ bÃ i viáº¿t nÃ o.</p>
  <% } else { %>
    <ul>
      <% posts.forEach(p => { %>
        <li>
          <h3><%= p.title %></h3>
          <p><%= p.body %></p>
          <small>ğŸ—“ <%= new Date(p.created_at).toLocaleString('vi-VN') %> | ğŸ†” <%= p.id %></small><br>
          <a href="/edit/<%= p.id %>">âœï¸ Sá»­a</a>
          <a href="/delete/<%= p.id %>" onclick="return confirm('XÃ³a bÃ i nÃ y?')">ğŸ—‘ XÃ³a</a>
        </li>
      <% }) %>
    </ul>
  <% } %>
</body>
</html>
